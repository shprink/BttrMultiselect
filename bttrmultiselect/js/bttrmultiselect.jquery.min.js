!function(){var t,e,s,i,n;i=function(){function e(t,e,s){this.element=t,this.multiple=s,this.element.html(this.parse(e))}return e.prototype.parse=function(t){var e,s,i,n,o;for(e="",s=0,n=0,o=t.length;o>n;n++)i=t[n],i.group?(s++,e+=this.addGroup(i)):i.empty||(e+=this.addOption(i));return e},e.prototype.addGroup=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+t("<div />").text(e.label).html()+"</li>")},e.prototype.addOption=function(t){var e,s;return t.disabled?"":(t.dom_id=this.container_id+"_o_"+t.array_index,e=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li id="'+t.dom_id+'" class="'+e.join(" ")+'"'+s+">"+t.html+"</li>")},e}(),s=function(){function t(){this.options_index=0,this.parsed=[],this.hasGroup=!1}return t.prototype.add_node=function(t){return"OPTGROUP"!==t.nodeName.toUpperCase()?this.add_option(t):(this.add_group(t),t.disabled||this.hasGroup?void 0:this.hasGroup=!0)},t.prototype.add_group=function(t){var e,s,i,n,o,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,children:0,disabled:t.disabled}),o=t.childNodes,r=[],i=0,n=o.length;n>i;i++)s=o[i],r.push(this.add_option(s,e,t.disabled));return r},t.prototype.add_option=function(t,e,s){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:s===!0?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t}(),s.parse=function(t){var e,i,n,o,r;for(i=new s,r=t.childNodes,n=0,o=r.length;o>n;n++)e=r[n],i.add_node(e);return i},this.SelectParser=s,e=function(){function e(e,s){var i;this.select=e,this.options=null!=s?s:{},this.$select=t(this.select),t.extend(this.options,this._getDefaultOptions(),this.options),i=this.$select.attr("multiple"),this.isMultiple="undefined"!=typeof i&&i!==!1?!0:!1,this.$bttrSelect=t(this._getTemplate()),this.$button=this.$bttrSelect.find("a.bttrmultiselect-button"),this.$search=this.$bttrSelect.find("div.bttrmultiselect-search"),this.$list=this.$bttrSelect.find("ul.bttrmultiselect-list"),this.$bttrSelect.insertAfter(this.$select),this.width=this.$select.outerWidth(),this._bindEvents(),this.$select.hide(),this.refresh(),this.$select.addClass("bttrmultiselect-done"),this.opened=!1}return e.prototype._getDefaultOptions=function(){var t;return t={search:!0,group_selector:!0}},e.prototype._getTemplate=function(){return"<div class='bttrmultiselect'>\n	<div class='bttrmultiselect-inner'>\n		<a href=\"javascript:void(0)\" class='bttrmultiselect-button'>\n			<span class=\"bttrmultiselect-selected\"></span>\n			<b></b>\n		</a>\n		<div class='bttrmultiselect-content'>\n			<div class='bttrmultiselect-search'>\n				<input type=\"text\" />\n			</div>\n			<ul class='bttrmultiselect-list'></ul>\n		</div>\n	</div>\n</div>"},e.prototype._bindEvents=function(){var t=this;return this.$button.on("click",function(){return t.opened?t.close():t.open()})},e.prototype._setButtonWidth=function(){return this.$button.css("width",this.width)},e.prototype._setContentWidth=function(){return this.$bttrSelect.css("width",this.width)},e.prototype._setContentPosition=function(){var t;return t=this.$button.offset(),this.$bttrSelect.css({top:t.top,left:t.left})},e.prototype.open=function(){return this.$bttrSelect.addClass("on"),this.opened=!0},e.prototype.close=function(){return this.$bttrSelect.removeClass("on"),this.opened=!1},e.prototype.refresh=function(){var t;return t=n.SelectParser.parse(this.select),this.data=t.parsed,this.hasGroup=t.hasGroup,this._setButtonWidth(),this._setContentWidth(),this._setContentPosition(),this.selector=new i(this.$list,this.data,this.isMultiple),console.log("refreshing")},e.prototype.checkAll=function(){},e.prototype.uncheckAll=function(){},e.prototype.enable=function(){},e.prototype.disable=function(){},e.prototype.getChecked=function(){return this.$select.find("option:checked")},e.prototype.setOptions=function(){},e.prototype.destroy=function(){return this.$select.removeClass("bttrmultiselect-done")},e}(),n=this,t=jQuery,t.fn.extend({bttrmultiselect:function(s){return this.each(function(){var i;return i=t(this),i.hasClass("bttrmultiselect-done")?void 0:i.data("bttrmultiselect",new e(this,s))})}})}.call(this);